# Установка Tomcat

**TL;DR**: Скачайте Tomcat 9 с официального сайта, распакуйте его, настройте файл `tomcat-users.xml` для доступа к manager интерфейсу, запустите Tomcat и затем используйте веб-интерфейс для деплоя WAR файла.

Ниже — пошаговая инструкция:

### **Скачивание Tomcat 9**

- Перейдите на официальный сайт Apache Tomcat по адресу: [https://tomcat.apache.org/](https://tomcat.apache.org/).
- Выберите нужное бинарное распределение (архив в формате `.zip` для Windows или `.tar.gz` для Unix-подобных систем) и скачайте его.

### **Распаковка и установка**

- Распакуйте скачанный архив в желаемую директорию. Например, в Linux можно выполнить:
  ```bash
  tar -xzf apache-tomcat-9.*.tar.gz -C /opt/
  ```
  или для Windows — распакуйте архив в выбранную папку.
- Убедитесь, что на вашей системе установлена Java (минимальная версия 8). Проверьте командой:
  ```bash
  java -version
  ```
- Если необходимо, настройте переменную окружения `JAVA_HOME` так, чтобы Tomcat мог её использовать.

### **Настройка доступа к Manager интерфейсу**

- Откройте файл `conf/tomcat-users.xml`, который находится в корневой директории Tomcat.
- Добавьте или отредактируйте записи для пользователя, которому будет предоставлен доступ к manager интерфейсу. Например:
  ```xml
  <tomcat-users>
    <!-- Назначаем роль для доступа к графическому интерфейсу manager -->
    <role rolename="manager-gui"/>
    <!-- Добавляем пользователя с логином "admin" и паролем "admin_password" -->
    <user username="admin" password="admin" roles="manager-gui"/>
  </tomcat-users>
  ```
- Сохраните изменения. **Важно:** В продакшене рекомендуется использовать более надёжные имена пользователей и пароли, а также ограничить доступ к интерфейсу.

### **Запуск Tomcat**

- Перейдите в директорию `bin` внутри установленного Tomcat.
- Для запуска сервера:
    - На **Linux/MacOS** выполните команду:
      ```bash
      ./startup.sh
      ```
    - На **Windows** запустите файл `startup.bat`.
- После запуска откройте браузер и перейдите по адресу [http://localhost:8080](http://localhost:8080) для проверки, что сервер работает.

### **Деплой WAR файла через Manager интерфейс**

- Откройте браузер и перейдите по адресу [http://localhost:8080/manager/html](http://localhost:8080/manager/html).
- Введите логин и пароль, которые вы указали в файле `tomcat-users.xml` (например, `admin` / `admin`).
- На странице Manager найдите раздел «Deploy».
- В поле «WAR file to deploy» нажмите кнопку для выбора файла (обычно с надписью «Choose File») и укажите путь к вашему WAR файлу на компьютере.
- В поле «Context Path» укажите желаемый путь, по которому ваше приложение будет доступно (например, `/myapp`). Если оставить поле пустым, Tomcat попытается определить его автоматически.
- Нажмите кнопку «Deploy».
- После успешного деплоя приложение станет доступно по адресу, например, [http://localhost:8080/myapp](http://localhost:8080/myapp).

### **Дополнительные настройки и рекомендации**

- **Безопасность:** Если вы собираетесь использовать Tomcat в продакшене, настройте HTTPS, ограничьте доступ к Manager интерфейсу (например, через firewall или VPN) и регулярно обновляйте сервер.
- **Логи и мониторинг:** Просматривайте логи в директории `logs` для диагностики возможных проблем. Логи помогут быстро выявить и устранить ошибки.
- **Настройка порта:** При необходимости измените порт, редактируя файл `conf/server.xml` (например, измените порт по умолчанию 8080).
